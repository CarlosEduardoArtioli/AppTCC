(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/v07":function(e,t,l){"use strict";l.r(t);var n=l("8Y7J");class s{}var i=l("pMnS"),r=l("MKJQ"),a=l("sZkV"),u=l("SVse"),o=l("mrSG"),c=l("XH10");class h{constructor(e,t,l,n,s){this.db=e,this.storage=t,this.toastCtrl=l,this.navCtrl=n,this.alertCtrl=s,this.post=new c.a(""),this.filters=[];const i=localStorage.getItem("baltagram.post");i&&(this.post=JSON.parse(i)),this.filters.push("filter-normal"),this.filters.push("filter-1977"),this.filters.push("filter-aden"),this.filters.push("filter-gingham"),this.filters.push("filter-ginza"),this.filters.push("filter-moon"),this.filters.push("filter-reyes"),this.filters.push("filter-willow")}ngOnInit(){}showMessage(e){return o.__awaiter(this,void 0,void 0,(function*(){yield this.toastCtrl.create({message:e,duration:3e3})}))}showCloseOptions(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({header:"Descartar Postagem?",message:"Deseja descartar esta <strong>postagem</strong>?",buttons:[{text:"Descartar",role:"cancel",cssClass:"secondary",handler:()=>{localStorage.removeItem("baltagram.post"),this.close()}},{text:"Manter",handler:()=>{this.close()}}]});yield e.present()}))}saveLocal(){localStorage.setItem("baltagram.post",JSON.stringify(this.post))}submit(){return o.__awaiter(this,void 0,void 0,(function*(){const e=`post_${(new Date).getTime()}.jpg`;this.task=this.storage.ref(e).putString(this.post.image,"data_url"),this.progress=this.task.percentageChanges(),this.task.then(e=>{this.storage.ref(e.metadata.fullPath).getDownloadURL().subscribe(e=>{this.post.image=e,this.db.collection("posts").add(this.post),localStorage.removeItem("baltagram.post"),this.navCtrl.navigateBack("/home")})})}))}close(){this.navCtrl.navigateBack("/home")}}var p=l("Cfvw"),d=l("LRne"),b=l("D0XW"),f=l("HDdC"),g=l("lJxs");function m(e,t){return function(e,t=b.a){return new f.a(l=>{let n;return null!=t?t.schedule(()=>{n=e.onSnapshot(l)}):n=e.onSnapshot(l),function(){null!=n&&n()}})}(e,t)}function y(e,t){return m(e,t).pipe(Object(g.a)(e=>({payload:e,type:"query"})))}var O=l("pxpQ"),k=l("pLZG"),q=l("Kqap");function v(e,t){return y(e,t).pipe(Object(g.a)(e=>e.payload.docChanges().map(e=>({type:e.type,payload:e}))))}function x(e,t,l){return y(e,l).pipe(Object(g.a)(e=>e.payload.docChanges()),Object(q.a)((e,l)=>function(e,t,l){return t.forEach(t=>{l.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case"modified":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}(e,t))}),e}(e,l,t),[]),Object(g.a)(e=>e.map(e=>({type:e.type,payload:e}))))}function j(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class w{constructor(e,t,l){this.ref=e,this.query=t,this.afs=l}stateChanges(e){return e&&0!==e.length?v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(k.a)(e=>e.length>0)):v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(Object(q.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=j(e);return x(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return y(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(t=>t.payload.docs.map(t=>e.idField?Object.assign({},t.data(),{[e.idField]:t.id}):t.data())))}get(e){return Object(p.a)(this.query.get(e)).pipe(Object(O.a)(this.afs.schedulers.insideAngular))}add(e){return this.ref.add(e)}doc(e){return new A(this.ref.doc(e),this.afs)}}class A{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const l=this.ref.collection(e),{ref:n,query:s}=_(l,t);return new w(n,s,this.afs)}snapshotChanges(){return m(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(g.a)(e=>({payload:e,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(Object(g.a)(e=>e.payload.data()))}get(e){return Object(p.a)(this.ref.get(e)).pipe(Object(O.a)(this.afs.schedulers.insideAngular))}}class I{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(k.a)(e=>e.length>0)):v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(Object(q.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=j(e);return x(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return y(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(e=>e.payload.docs.map(e=>e.data())))}get(e){return Object(p.a)(this.query.get(e)).pipe(Object(O.a)(this.afs.schedulers.insideAngular))}}var C=l("1XSQ"),U=l("yA/v"),S=l("Wcq6"),F=l.n(S);const J=parseInt(F.a.SDK_VERSION.split(".")[0]),D=J<5||5==J&&parseInt(F.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function _(e,t=(e=>e)){return{query:t(e),ref:e}}let K=class{constructor(e,t,l,n,s,i,r){this.schedulers=new C.b(i),this.keepUnstableUntilFirst=Object(C.c)(this.schedulers,s),this.firestore=i.runOutsideAngular(()=>{const l=Object(U.e)(e,i,t).firestore();return l.settings(n||D),l}),this.persistenceEnabled$=l&&!Object(u.q)(s)?i.runOutsideAngular(()=>{try{return Object(p.a)(this.firestore.enablePersistence(r||void 0).then(()=>!0,()=>!1))}catch(e){return Object(d.a)(!1)}}):Object(d.a)(!1)}collection(e,t){let l;l="string"==typeof e?this.firestore.collection(e):e;const{ref:n,query:s}=_(l,t);return new w(n,s,this)}collectionGroup(e,t){if(J<6)throw"collection group queries require Firebase JS SDK >= 6.0";const l=t||(e=>e),n=this.firestore.collectionGroup(e);return new I(l(n),this)}doc(e){let t;return t="string"==typeof e?this.firestore.doc(e):e,new A(t,this)}createId(){return this.firestore.collection("_").doc().id}};var E=l("gJ2e"),N=n.ob({encapsulation:0,styles:[["img[_ngcontent-%COMP%]{width:100%!important}"]],data:{}});function P(e){return n.Kb(0,[(e()(),n.qb(0,0,null,null,2,"ion-slide",[],null,null,null,r.U,r.v)),n.pb(1,49152,null,0,a.mb,[n.h,n.k,n.x],null,null),(e()(),n.qb(2,0,null,0,0,"img",[["alt",""]],[[8,"src",4],[8,"className",0]],null,null,null,null))],null,(function(e,t){e(t,2,0,n.ub(1,"",t.component.post.image,""),n.ub(1,"",t.context.$implicit,""))}))}function B(e){return n.Kb(0,[(e()(),n.qb(0,0,null,null,1,"ion-progress-bar",[],null,null,null,r.S,r.t)),n.pb(1,49152,null,0,a.V,[n.h,n.k,n.x],{value:[0,"value"]},null)],(function(e,t){e(t,1,0,t.context.ngIf/100)}),null)}function G(e){return n.Kb(0,[(e()(),n.qb(0,0,null,null,2,"ion-button",[["expand","block"],["fill","outline"],["ion-item",""],["shape","round"],["size","large"]],null,[[null,"click"]],(function(e,t,l){var n=!0;return"click"===t&&(n=!1!==e.component.submit()&&n),n}),r.B,r.c)),n.pb(1,49152,null,0,a.j,[n.h,n.k,n.x],{expand:[0,"expand"],fill:[1,"fill"],shape:[2,"shape"],size:[3,"size"]},null),(e()(),n.Ib(-1,0,[" PUBLICAR "]))],(function(e,t){e(t,1,0,"block","outline","round","large")}),null)}function L(e){return n.Kb(0,[(e()(),n.qb(0,0,null,null,12,"ion-header",[],null,null,null,r.J,r.k)),n.pb(1,49152,null,0,a.A,[n.h,n.k,n.x],null,null),(e()(),n.qb(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.X,r.y)),n.pb(3,49152,null,0,a.yb,[n.h,n.k,n.x],null,null),(e()(),n.qb(4,0,null,0,2,"ion-title",[],null,null,null,r.W,r.x)),n.pb(5,49152,null,0,a.wb,[n.h,n.k,n.x],null,null),(e()(),n.Ib(-1,0,["Foto"])),(e()(),n.qb(7,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.C,r.d)),n.pb(8,49152,null,0,a.k,[n.h,n.k,n.x],null,null),(e()(),n.qb(9,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,t,l){var n=!0;return"click"===t&&(n=!1!==e.component.showCloseOptions()&&n),n}),r.B,r.c)),n.pb(10,49152,null,0,a.j,[n.h,n.k,n.x],null,null),(e()(),n.qb(11,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,r.K,r.l)),n.pb(12,49152,null,0,a.B,[n.h,n.k,n.x],{name:[0,"name"]},null),(e()(),n.qb(13,0,null,null,13,"ion-content",[["class","ion-padding"]],null,null,null,r.F,r.g)),n.pb(14,49152,null,0,a.t,[n.h,n.k,n.x],null,null),(e()(),n.qb(15,0,null,0,5,"ion-card",[],null,null,null,r.D,r.e)),n.pb(16,49152,null,0,a.l,[n.h,n.k,n.x],null,null),(e()(),n.qb(17,0,null,0,3,"ion-slides",[["pager","true"]],null,null,null,r.V,r.w)),n.pb(18,49152,null,0,a.nb,[n.h,n.k,n.x],{pager:[0,"pager"]},null),(e()(),n.fb(16777216,null,0,1,null,P)),n.pb(20,278528,null,0,u.i,[n.N,n.J,n.q],{ngForOf:[0,"ngForOf"]},null),(e()(),n.qb(21,0,null,0,0,"br",[],null,null,null,null,null)),(e()(),n.fb(16777216,null,0,2,null,B)),n.pb(23,16384,null,0,u.j,[n.N,n.J],{ngIf:[0,"ngIf"]},null),n.Eb(131072,u.b,[n.h]),(e()(),n.fb(16777216,null,0,1,null,G)),n.pb(26,16384,null,0,u.j,[n.N,n.J],{ngIf:[0,"ngIf"]},null)],(function(e,t){var l=t.component;e(t,12,0,"close"),e(t,18,0,"true"),e(t,20,0,l.filters),e(t,23,0,n.Jb(t,23,0,n.Cb(t,24).transform(l.progress))),e(t,26,0,!l.progress)}),null)}function M(e){return n.Kb(0,[(e()(),n.qb(0,0,null,null,1,"app-post-photo",[],null,null,null,L,N)),n.pb(1,114688,null,0,h,[K,E.a,a.Jb,a.Eb,a.b],null,null)],(function(e,t){e(t,1,0)}),null)}var V=n.mb("app-post-photo",h,M,{},{},[]),z=l("s7LF"),R=l("iInd");class X{}l.d(t,"PostPhotoPageModuleNgFactory",(function(){return Q}));var Q=n.nb(s,[],(function(e){return n.zb([n.Ab(512,n.j,n.Y,[[8,[i.a,V]],[3,n.j],n.v]),n.Ab(4608,u.l,u.k,[n.s,[2,u.s]]),n.Ab(4608,z.o,z.o,[]),n.Ab(4608,a.c,a.c,[n.x,n.g]),n.Ab(4608,a.Db,a.Db,[a.c,n.j,n.p]),n.Ab(4608,a.Gb,a.Gb,[a.c,n.j,n.p]),n.Ab(1073742336,u.c,u.c,[]),n.Ab(1073742336,z.n,z.n,[]),n.Ab(1073742336,z.e,z.e,[]),n.Ab(1073742336,a.Ab,a.Ab,[]),n.Ab(1073742336,R.o,R.o,[[2,R.t],[2,R.m]]),n.Ab(1073742336,X,X,[]),n.Ab(1073742336,s,s,[]),n.Ab(1024,R.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);