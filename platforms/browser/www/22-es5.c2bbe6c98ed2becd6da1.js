(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/v07":function(e,t,n){"use strict";n.r(t);var l=n("8Y7J");class s{}var i=n("pMnS"),r=n("MKJQ"),a=n("sZkV"),u=n("SVse"),o=n("mrSG"),c=n("XH10");class h{constructor(e,t,n,l,s){this.db=e,this.storage=t,this.toastCtrl=n,this.navCtrl=l,this.alertCtrl=s,this.post=new c.a(""),this.filters=[];const i=localStorage.getItem("baltagram.post");i&&(this.post=JSON.parse(i)),this.filters.push("filter-normal"),this.filters.push("filter-1977"),this.filters.push("filter-aden"),this.filters.push("filter-gingham"),this.filters.push("filter-ginza"),this.filters.push("filter-moon"),this.filters.push("filter-reyes"),this.filters.push("filter-willow")}ngOnInit(){}showMessage(e){return o.__awaiter(this,void 0,void 0,(function*(){yield this.toastCtrl.create({message:e,duration:3e3})}))}showCloseOptions(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({header:"Descartar Postagem?",message:"Deseja descartar esta <strong>postagem</strong>?",buttons:[{text:"Descartar",role:"cancel",cssClass:"secondary",handler:()=>{localStorage.removeItem("baltagram.post"),this.close()}},{text:"Manter",handler:()=>{this.close()}}]});yield e.present()}))}saveLocal(){localStorage.setItem("baltagram.post",JSON.stringify(this.post))}submit(){return o.__awaiter(this,void 0,void 0,(function*(){const e="post_".concat((new Date).getTime(),".jpg");this.task=this.storage.ref(e).putString(this.post.image,"data_url"),this.progress=this.task.percentageChanges(),this.task.then(e=>{this.storage.ref(e.metadata.fullPath).getDownloadURL().subscribe(e=>{this.post.image=e,this.db.collection("posts").add(this.post),localStorage.removeItem("baltagram.post"),this.navCtrl.navigateBack("/home")})})}))}close(){this.navCtrl.navigateBack("/home")}}var p=n("Cfvw"),d=n("LRne"),b=n("D0XW"),f=n("HDdC"),g=n("lJxs");function m(e,t){return function(e,t=b.a){return new f.a(n=>{let l;return null!=t?t.schedule(()=>{l=e.onSnapshot(n)}):l=e.onSnapshot(n),function(){null!=l&&l()}})}(e,t)}function y(e,t){return m(e,t).pipe(Object(g.a)(e=>({payload:e,type:"query"})))}var O=n("pxpQ"),k=n("pLZG"),q=n("Kqap");function v(e,t){return y(e,t).pipe(Object(g.a)(e=>e.payload.docChanges().map(e=>({type:e.type,payload:e}))))}function x(e,t,n){return y(e,n).pipe(Object(g.a)(e=>e.payload.docChanges()),Object(q.a)((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case"modified":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}(e,t))}),e}(e,n,t),[]),Object(g.a)(e=>e.map(e=>({type:e.type,payload:e}))))}function j(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class w{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){return e&&0!==e.length?v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(k.a)(e=>e.length>0)):v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(Object(q.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=j(e);return x(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return y(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(t=>t.payload.docs.map(t=>e.idField?Object.assign({},t.data(),{[e.idField]:t.id}):t.data())))}get(e){return Object(p.a)(this.query.get(e)).pipe(Object(O.a)(this.afs.schedulers.insideAngular))}add(e){return this.ref.add(e)}doc(e){return new A(this.ref.doc(e),this.afs)}}class A{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:l,query:s}=_(n,t);return new w(l,s,this.afs)}snapshotChanges(){return m(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(g.a)(e=>({payload:e,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(Object(g.a)(e=>e.payload.data()))}get(e){return Object(p.a)(this.ref.get(e)).pipe(Object(O.a)(this.afs.schedulers.insideAngular))}}class I{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(k.a)(e=>e.length>0)):v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(Object(q.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=j(e);return x(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return y(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(g.a)(e=>e.payload.docs.map(e=>e.data())))}get(e){return Object(p.a)(this.query.get(e)).pipe(Object(O.a)(this.afs.schedulers.insideAngular))}}var C=n("1XSQ"),U=n("yA/v"),S=n("Wcq6"),F=n.n(S);const J=parseInt(F.a.SDK_VERSION.split(".")[0]),D=J<5||5==J&&parseInt(F.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function _(e,t=(e=>e)){return{query:t(e),ref:e}}let K=class{constructor(e,t,n,l,s,i,r){this.schedulers=new C.b(i),this.keepUnstableUntilFirst=Object(C.c)(this.schedulers,s),this.firestore=i.runOutsideAngular(()=>{const n=Object(U.e)(e,i,t).firestore();return n.settings(l||D),n}),this.persistenceEnabled$=n&&!Object(u.q)(s)?i.runOutsideAngular(()=>{try{return Object(p.a)(this.firestore.enablePersistence(r||void 0).then(()=>!0,()=>!1))}catch(e){return Object(d.a)(!1)}}):Object(d.a)(!1)}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:s}=_(n,t);return new w(l,s,this)}collectionGroup(e,t){if(J<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=t||(e=>e),l=this.firestore.collectionGroup(e);return new I(n(l),this)}doc(e){let t;return t="string"==typeof e?this.firestore.doc(e):e,new A(t,this)}createId(){return this.firestore.collection("_").doc().id}};var E=n("gJ2e"),N=l.ob({encapsulation:0,styles:[["img[_ngcontent-%COMP%]{width:100%!important}"]],data:{}});function P(e){return l.Kb(0,[(e()(),l.qb(0,0,null,null,2,"ion-slide",[],null,null,null,r.U,r.v)),l.pb(1,49152,null,0,a.mb,[l.h,l.k,l.x],null,null),(e()(),l.qb(2,0,null,0,0,"img",[["alt",""]],[[8,"src",4],[8,"className",0]],null,null,null,null))],null,(function(e,t){e(t,2,0,l.ub(1,"",t.component.post.image,""),l.ub(1,"",t.context.$implicit,""))}))}function B(e){return l.Kb(0,[(e()(),l.qb(0,0,null,null,1,"ion-progress-bar",[],null,null,null,r.S,r.t)),l.pb(1,49152,null,0,a.V,[l.h,l.k,l.x],{value:[0,"value"]},null)],(function(e,t){e(t,1,0,t.context.ngIf/100)}),null)}function G(e){return l.Kb(0,[(e()(),l.qb(0,0,null,null,2,"ion-button",[["expand","block"],["fill","outline"],["ion-item",""],["shape","round"],["size","large"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.submit()&&l),l}),r.B,r.c)),l.pb(1,49152,null,0,a.j,[l.h,l.k,l.x],{expand:[0,"expand"],fill:[1,"fill"],shape:[2,"shape"],size:[3,"size"]},null),(e()(),l.Ib(-1,0,[" PUBLICAR "]))],(function(e,t){e(t,1,0,"block","outline","round","large")}),null)}function L(e){return l.Kb(0,[(e()(),l.qb(0,0,null,null,12,"ion-header",[],null,null,null,r.J,r.k)),l.pb(1,49152,null,0,a.A,[l.h,l.k,l.x],null,null),(e()(),l.qb(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.X,r.y)),l.pb(3,49152,null,0,a.yb,[l.h,l.k,l.x],null,null),(e()(),l.qb(4,0,null,0,2,"ion-title",[],null,null,null,r.W,r.x)),l.pb(5,49152,null,0,a.wb,[l.h,l.k,l.x],null,null),(e()(),l.Ib(-1,0,["Foto"])),(e()(),l.qb(7,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.C,r.d)),l.pb(8,49152,null,0,a.k,[l.h,l.k,l.x],null,null),(e()(),l.qb(9,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.showCloseOptions()&&l),l}),r.B,r.c)),l.pb(10,49152,null,0,a.j,[l.h,l.k,l.x],null,null),(e()(),l.qb(11,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,r.K,r.l)),l.pb(12,49152,null,0,a.B,[l.h,l.k,l.x],{name:[0,"name"]},null),(e()(),l.qb(13,0,null,null,13,"ion-content",[["class","ion-padding"]],null,null,null,r.F,r.g)),l.pb(14,49152,null,0,a.t,[l.h,l.k,l.x],null,null),(e()(),l.qb(15,0,null,0,5,"ion-card",[],null,null,null,r.D,r.e)),l.pb(16,49152,null,0,a.l,[l.h,l.k,l.x],null,null),(e()(),l.qb(17,0,null,0,3,"ion-slides",[["pager","true"]],null,null,null,r.V,r.w)),l.pb(18,49152,null,0,a.nb,[l.h,l.k,l.x],{pager:[0,"pager"]},null),(e()(),l.fb(16777216,null,0,1,null,P)),l.pb(20,278528,null,0,u.i,[l.N,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),(e()(),l.qb(21,0,null,0,0,"br",[],null,null,null,null,null)),(e()(),l.fb(16777216,null,0,2,null,B)),l.pb(23,16384,null,0,u.j,[l.N,l.J],{ngIf:[0,"ngIf"]},null),l.Eb(131072,u.b,[l.h]),(e()(),l.fb(16777216,null,0,1,null,G)),l.pb(26,16384,null,0,u.j,[l.N,l.J],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,12,0,"close"),e(t,18,0,"true"),e(t,20,0,n.filters),e(t,23,0,l.Jb(t,23,0,l.Cb(t,24).transform(n.progress))),e(t,26,0,!n.progress)}),null)}var M=l.mb("app-post-photo",h,(function(e){return l.Kb(0,[(e()(),l.qb(0,0,null,null,1,"app-post-photo",[],null,null,null,L,N)),l.pb(1,114688,null,0,h,[K,E.a,a.Jb,a.Eb,a.b],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),V=n("s7LF"),z=n("iInd");class R{}n.d(t,"PostPhotoPageModuleNgFactory",(function(){return X}));var X=l.nb(s,[],(function(e){return l.zb([l.Ab(512,l.j,l.Y,[[8,[i.a,M]],[3,l.j],l.v]),l.Ab(4608,u.l,u.k,[l.s,[2,u.s]]),l.Ab(4608,V.o,V.o,[]),l.Ab(4608,a.c,a.c,[l.x,l.g]),l.Ab(4608,a.Db,a.Db,[a.c,l.j,l.p]),l.Ab(4608,a.Gb,a.Gb,[a.c,l.j,l.p]),l.Ab(1073742336,u.c,u.c,[]),l.Ab(1073742336,V.n,V.n,[]),l.Ab(1073742336,V.e,V.e,[]),l.Ab(1073742336,a.Ab,a.Ab,[]),l.Ab(1073742336,z.o,z.o,[[2,z.t],[2,z.m]]),l.Ab(1073742336,R,R,[]),l.Ab(1073742336,s,s,[]),l.Ab(1024,z.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);