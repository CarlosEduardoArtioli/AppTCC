(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"0m3x":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class u{}var i=e("pMnS"),o=e("MKJQ"),r=e("sZkV"),a=e("iInd"),c=e("SVse"),s=e("mrSG"),p=e("Tj/N"),b=e("PVcy");let m=(()=>{class l{constructor(l){this.db=l}createUser(l,n){l=l.replace(/[.#$]+/g,":"),this.db.object(`/users/${l}/settings`).set({name:n,email:l})}getUser(l){return l=l.replace(/[.#$]+/g,":"),this.userRef=this.db.object(`/users/${l}/settings/name`),console.log(this.userRef),this.userRef}getUserName(l){return l=l.replace(/[.#$]+/g,":"),this.name=this.db.object(`/users/${l}/settings/name`),this.name}updateUserName(l,n){n=n.replace(/[.#$]+/g,":"),this.db.database.ref(`/users/${n}/settings/name`).set(l)}}return l.ngInjectableDef=t.Mb({factory:function(){return new l(t.Nb(b.a))},token:l,providedIn:"root"}),l})();class h{constructor(l,n,e,t,u){this.navCtrl=l,this.actionSheetCtrl=n,this.alertCtrl=e,this.toastController=t,this.userService=u,this.user=new p.a("","",""),this.pages=[{title:"Home",url:"/menu/home",icon:"home"},{title:"Editar",icon:"create-outline",open:!1,children:[{title:"Dispositivo",url:"/menu/edit-device-list",icon:"hardware-chip"},{title:"C\xf4modo",url:"/menu/edit-room-list",icon:"home"}]},{title:"Fun\xe7\xf5es",url:"/menu/functions",icon:"build"}]}ngOnInit(){this.userName(),this.user=JSON.parse(localStorage.getItem("app.user"))}userName(){this.user=JSON.parse(localStorage.getItem("app.user")),""===this.user.name?(localStorage.setItem("app.user",JSON.stringify(new p.a(this.user.email,this.user.email,"https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png"))),this.user=JSON.parse(localStorage.getItem("app.user")),this.userService.updateUserName(this.user.name,this.user.email)):(this.userService.getUserName(this.user.email).valueChanges().subscribe(l=>{this.user.name=l,localStorage.setItem("app.user",JSON.stringify(new p.a(this.user.name,this.user.email,this.user.image)))}),this.user=JSON.parse(localStorage.getItem("app.user"))),this.user=JSON.parse(localStorage.getItem("app.user"))}showOptions(){return s.__awaiter(this,void 0,void 0,(function*(){const l=yield this.actionSheetCtrl.create({header:"Op\xe7\xf5es",buttons:[{text:"Alterar Nome",icon:"person",handler:()=>{this.alterarNome()}},{text:"Logout",icon:"power",role:"destructive",handler:()=>{localStorage.removeItem("app.user"),this.navCtrl.navigateRoot("/login")}},{text:"Cancelar",icon:"close",role:"cancel"}]});yield l.present()}))}alterarNome(){return s.__awaiter(this,void 0,void 0,(function*(){const l=yield this.alertCtrl.create({header:"Novo Nome",inputs:[{name:"new-name",id:"newname",placeholder:"Escreva um novo nome",value:this.novoNome}],buttons:[{text:"Cancelar",role:"cancel",handler:l=>{console.log("Cancel clicked")}},{text:"Salvar",handler:l=>{this.user=JSON.parse(localStorage.getItem("app.user")),""!=document.getElementById("newname").value&&(this.novoNome=document.getElementById("newname").value,this.user=JSON.parse(localStorage.getItem("app.user")),localStorage.setItem("app.user",JSON.stringify(new p.a(this.novoNome,this.user.email,"https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png"))),this.newname(),this.user=JSON.parse(localStorage.getItem("app.user")),this.userService.updateUserName(this.user.name,this.user.email))}}]});yield l.present()}))}newname(){return s.__awaiter(this,void 0,void 0,(function*(){const l=yield this.toastController.create({header:"Seu nome foi alterado.",duration:2e3});yield l.present()}))}}var d=t.ob({encapsulation:0,styles:[[".active[_ngcontent-%COMP%]{--ion-text-color:var(--ion-color-primary)}.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--ion-text-color-rgb:var(--ion-color-primary)}.active-parent[_ngcontent-%COMP%]{font-weight:500}.sub-item[_ngcontent-%COMP%]{padding-left:20px;font-size:small}ion-content[_ngcontent-%COMP%]{opacity:1}"]],data:{}});function g(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,13,"ion-menu-toggle",[],null,null,null,o.R,o.s)),t.pb(1,49152,null,0,r.S,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,11,"ion-item",[["routerDirection","root"],["routerLinkActive","active"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t.Cb(l,4).onClick()&&u),"click"===n&&(u=!1!==t.Cb(l,5).onClick(e)&&u),u}),o.N,o.n)),t.pb(3,49152,null,0,r.H,[t.h,t.k,t.x],{routerDirection:[0,"routerDirection"]},null),t.pb(4,16384,[[1,4]],0,a.n,[a.m,a.a,[8,null],t.B,t.k],{routerLink:[0,"routerLink"]},null),t.pb(5,737280,null,0,r.Ib,[c.g,r.Fb,t.k,a.m,[2,a.n]],{routerDirection:[0,"routerDirection"]},null),t.pb(6,1720320,null,2,a.o,[a.m,t.k,t.B,[2,a.n],[2,a.p]],{routerLinkActive:[0,"routerLinkActive"]},null),t.Fb(603979776,1,{links:1}),t.Fb(603979776,2,{linksWithHrefs:1}),(l()(),t.qb(9,0,null,0,1,"ion-icon",[["slot","start"]],null,null,null,o.L,o.l)),t.pb(10,49152,null,0,r.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.qb(11,0,null,0,2,"ion-label",[],null,null,null,o.O,o.o)),t.pb(12,49152,null,0,r.N,[t.h,t.k,t.x],null,null),(l()(),t.Hb(13,0,[" "," "]))],(function(l,n){l(n,3,0,"root"),l(n,4,0,n.parent.context.$implicit.url),l(n,5,0,"root"),l(n,6,0,"active"),l(n,10,0,n.parent.context.$implicit.icon)}),(function(l,n){l(n,13,0,n.parent.context.$implicit.title)}))}function f(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,1,"ion-icon",[["name","add-outline"],["slot","end"]],null,null,null,o.L,o.l)),t.pb(1,49152,null,0,r.C,[t.h,t.k,t.x],{name:[0,"name"]},null)],(function(l,n){l(n,1,0,"add-outline")}),null)}function k(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,1,"ion-icon",[["name","remove-outline"],["slot","end"]],null,null,null,o.L,o.l)),t.pb(1,49152,null,0,r.C,[t.h,t.k,t.x],{name:[0,"name"]},null)],(function(l,n){l(n,1,0,"remove-outline")}),null)}function v(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,10,"ion-item",[["button",""],["detail","false"]],[[2,"active-parent",null]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=0!=(l.parent.context.$implicit.open=!l.parent.context.$implicit.open)&&t),t}),o.N,o.n)),t.pb(1,49152,null,0,r.H,[t.h,t.k,t.x],{button:[0,"button"],detail:[1,"detail"]},null),(l()(),t.fb(16777216,null,0,1,null,f)),t.pb(3,16384,null,0,c.i,[t.N,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,0,1,null,k)),t.pb(5,16384,null,0,c.i,[t.N,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(6,0,null,0,1,"ion-icon",[["slot","start"]],null,null,null,o.L,o.l)),t.pb(7,49152,null,0,r.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.qb(8,0,null,0,2,"ion-label",[],null,null,null,o.O,o.o)),t.pb(9,49152,null,0,r.N,[t.h,t.k,t.x],null,null),(l()(),t.Hb(10,0,["",""]))],(function(l,n){l(n,1,0,"","false"),l(n,3,0,!n.parent.context.$implicit.open),l(n,5,0,n.parent.context.$implicit.open),l(n,7,0,n.parent.context.$implicit.icon)}),(function(l,n){l(n,0,0,n.parent.context.$implicit.open),l(n,10,0,n.parent.context.$implicit.title)}))}function x(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,11,"ion-item",[["class","sub-item"],["routerDirection","root"],["routerLinkActive","active"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t.Cb(l,2).onClick()&&u),"click"===n&&(u=!1!==t.Cb(l,3).onClick(e)&&u),u}),o.N,o.n)),t.pb(1,49152,null,0,r.H,[t.h,t.k,t.x],{routerDirection:[0,"routerDirection"]},null),t.pb(2,16384,[[3,4]],0,a.n,[a.m,a.a,[8,null],t.B,t.k],{routerLink:[0,"routerLink"]},null),t.pb(3,737280,null,0,r.Ib,[c.g,r.Fb,t.k,a.m,[2,a.n]],{routerDirection:[0,"routerDirection"]},null),t.pb(4,1720320,null,2,a.o,[a.m,t.k,t.B,[2,a.n],[2,a.p]],{routerLinkActive:[0,"routerLinkActive"]},null),t.Fb(603979776,3,{links:1}),t.Fb(603979776,4,{linksWithHrefs:1}),(l()(),t.qb(7,0,null,0,1,"ion-icon",[["slot","start"]],null,null,null,o.L,o.l)),t.pb(8,49152,null,0,r.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.qb(9,0,null,0,2,"ion-label",[],null,null,null,o.O,o.o)),t.pb(10,49152,null,0,r.N,[t.h,t.k,t.x],null,null),(l()(),t.Hb(11,0,[" "," "]))],(function(l,n){l(n,1,0,"root"),l(n,2,0,n.context.$implicit.url),l(n,3,0,"root"),l(n,4,0,"active"),l(n,8,0,n.context.$implicit.icon)}),(function(l,n){l(n,11,0,n.context.$implicit.title)}))}function N(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,5,"ion-list",[],null,null,null,o.P,o.p)),t.pb(1,49152,null,0,r.O,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,3,"ion-menu-toggle",[],null,null,null,o.R,o.s)),t.pb(3,49152,null,0,r.S,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,x)),t.pb(5,278528,null,0,c.h,[t.N,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,5,0,n.parent.context.$implicit.children)}),null)}function I(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,g)),t.pb(2,16384,null,0,c.i,[t.N,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,null,1,null,v)),t.pb(4,16384,null,0,c.i,[t.N,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,null,1,null,N)),t.pb(6,16384,null,0,c.i,[t.N,t.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.context.$implicit.url),l(n,4,0,(null==n.context.$implicit.children?null:n.context.$implicit.children.length)>0),l(n,6,0,n.context.$implicit.open)}),null)}function C(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,17,"ion-menu",[["contentId","content"]],null,null,null,o.S,o.q)),t.pb(1,49152,null,0,r.Q,[t.h,t.k,t.x],{contentId:[0,"contentId"]},null),(l()(),t.qb(2,0,null,0,11,"ion-header",[],null,null,null,o.K,o.k)),t.pb(3,49152,null,0,r.B,[t.h,t.k,t.x],null,null),(l()(),t.qb(4,0,null,0,9,"ion-toolbar",[],null,null,null,o.Z,o.z)),t.pb(5,49152,null,0,r.zb,[t.h,t.k,t.x],null,null),(l()(),t.qb(6,0,null,0,7,"ion-item",[["lines","none"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.showOptions()&&t),t}),o.N,o.n)),t.pb(7,49152,null,0,r.H,[t.h,t.k,t.x],{lines:[0,"lines"]},null),(l()(),t.qb(8,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,o.B,o.b)),t.pb(9,49152,null,0,r.f,[t.h,t.k,t.x],null,null),(l()(),t.qb(10,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.qb(11,0,null,0,2,"ion-label",[],null,null,null,o.O,o.o)),t.pb(12,49152,null,0,r.N,[t.h,t.k,t.x],null,null),(l()(),t.Hb(13,0,["",""])),(l()(),t.qb(14,0,null,0,3,"ion-content",[],null,null,null,o.H,o.h)),t.pb(15,49152,null,0,r.u,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,I)),t.pb(17,278528,null,0,c.h,[t.N,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(18,16777216,null,null,1,"ion-router-outlet",[["id","content"],["main",""]],null,null,null,null,null)),t.pb(19,212992,null,0,r.fb,[a.b,t.N,t.j,[8,null],[8,null],r.d,r.Fb,c.f,t.k,a.m,t.x,a.a,[3,r.fb]],null,null)],(function(l,n){var e=n.component;l(n,1,0,"content"),l(n,7,0,"none"),l(n,17,0,e.pages),l(n,19,0)}),(function(l,n){var e=n.component;l(n,10,0,t.ub(1,"",e.user.image,"")),l(n,13,0,e.user.name)}))}function S(l){return t.Ib(0,[(l()(),t.qb(0,0,null,null,1,"app-menu",[],null,null,null,C,d)),t.pb(1,114688,null,0,h,[r.Fb,r.a,r.b,r.Lb,m],null,null)],(function(l,n){l(n,1,0)}),null)}var q=t.mb("app-menu",h,S,{},{},[]),O=e("s7LF"),w=e("UTcu");const A=()=>Promise.all([e.e(0),e.e(25)]).then(e.bind(null,"TbC0")).then(l=>l.HomePageModuleNgFactory),$=()=>Promise.all([e.e(0),e.e(20)]).then(e.bind(null,"BWIA")).then(l=>l.EditRoomListPageModuleNgFactory),J=()=>Promise.all([e.e(0),e.e(18)]).then(e.bind(null,"NDWJ")).then(l=>l.EditDeviceListPageModuleNgFactory),y=()=>e.e(21).then(e.bind(null,"G8DH")).then(l=>l.FunctionsPageModuleNgFactory);class F{}e.d(n,"MenuPageModuleNgFactory",(function(){return L}));var L=t.nb(u,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[i.a,q]],[3,t.j],t.v]),t.Ab(4608,c.k,c.j,[t.s,[2,c.r]]),t.Ab(4608,O.p,O.p,[]),t.Ab(4608,r.c,r.c,[t.x,t.g]),t.Ab(4608,r.Eb,r.Eb,[r.c,t.j,t.p]),t.Ab(4608,r.Hb,r.Hb,[r.c,t.j,t.p]),t.Ab(1073742336,c.b,c.b,[]),t.Ab(1073742336,O.o,O.o,[]),t.Ab(1073742336,O.e,O.e,[]),t.Ab(1073742336,r.Bb,r.Bb,[]),t.Ab(1073742336,a.q,a.q,[[2,a.v],[2,a.m]]),t.Ab(1073742336,F,F,[]),t.Ab(1073742336,u,u,[]),t.Ab(1024,a.k,(function(){return[[{path:"",redirectTo:"menu/home",pathMatch:"full"},{path:"",component:h,children:[{path:"home",loadChildren:A,canActivate:[w.a]},{path:"edit-room-list",loadChildren:$,canActivate:[w.a]},{path:"edit-device-list",loadChildren:J,canActivate:[w.a]},{path:"functions",loadChildren:y,canActivate:[w.a]}]}]]}),[])])}))}}]);